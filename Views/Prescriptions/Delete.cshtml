@model ClinicApp.ViewModels.PrescriptionViewModel

@{
    ViewData["Title"] = "Delete Prescription";
}

<h3 class="mb-4 text-danger fw-bold">
    <i class="bi bi-trash"></i> @ViewData["Title"]
</h3>

<div class="alert alert-warning d-flex align-items-center shadow-sm border-0 mb-4">
    <i class="bi bi-exclamation-triangle-fill me-2 fs-4"></i>
    <div>
        <strong>Warning:</strong> You are about to permanently delete this prescription. This action cannot be undone.
    </div>
</div>

<div class="card border-0 shadow-sm mb-4">
    <div class="card-header bg-danger text-white py-2 fw-semibold">
        Prescription Information
    </div>
    <div class="card-body">
        <div class="row g-3">

            <div class="col-md-4">
                <label class="fw-semibold text-secondary">Entry No</label>
                <div class="form-control border border-secondary-subtle bg-light">@Model.EntryNo</div>
            </div>

            <div class="col-md-4">
                <label class="fw-semibold text-secondary">Entry Date</label>
                <div class="form-control border border-secondary-subtle bg-light">@($"{Model.EntryDate:dd/MM/yyyy HH:mm}")</div>
            </div>

            <div class="col-md-4">
                <label class="fw-semibold text-secondary">Patient Name</label>
                <div class="form-control border border-secondary-subtle bg-light">@Model.PatientName</div>
            </div>

            <div class="col-md-4">
                <label class="fw-semibold text-secondary">UHID</label>
                <div class="form-control border border-secondary-subtle bg-light">@Model.UHID</div>
            </div>

            <div class="col-md-4">
                <label class="fw-semibold text-secondary">Contact</label>
                <div class="form-control border border-secondary-subtle bg-light">@Model.CellNo</div>
            </div>

            <div class="col-md-4">
                <label class="fw-semibold text-secondary">Disease</label>
                <div class="form-control border border-secondary-subtle bg-light">@Model.Disease</div>
            </div>

            <div class="col-md-6">
                <label class="fw-semibold text-secondary">Consulted By</label>
                <div class="form-control border border-secondary-subtle bg-light">@Model.ConsultBy</div>
            </div>

            <div class="col-md-6">
                <label class="fw-semibold text-secondary">Referred By</label>
                <div class="form-control border border-secondary-subtle bg-light">@Model.ReferredBy</div>
            </div>

            <div class="col-md-12">
                <label class="fw-semibold text-secondary">Remarks</label>
                <div class="form-control border border-secondary-subtle bg-light">@Model.Remarks</div>
            </div>

            <div class="col-md-4">
                <label class="fw-semibold text-secondary">Next Visit</label>
                <div class="form-control border border-secondary-subtle bg-light">@Model.NextVisitDate?.ToString("dd/MM/yyyy") (@Model.NextVisitAfter days)</div>
            </div>

            <div class="col-md-4">
                <label class="fw-semibold text-secondary">Total Amount</label>
                <div class="form-control border border-secondary-subtle bg-light text-success fw-semibold">
                    @Model.TotalAmount?.ToString("C")
                </div>
            </div>
        </div>
    </div>
</div>

@if (Model.Details != null && Model.Details.Count > 0)
{
    <div class="card border-0 shadow-sm mb-4">
        <div class="card-header bg-secondary text-white py-2 fw-semibold">
            Prescription Items
        </div>
        <div class="card-body p-0">
            <table class="table table-bordered table-striped align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:5%">#</th>
                        <th>Description</th>
                        <th style="width:20%">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        int i = 1;
                        foreach (var item in Model.Details)
                        {
                            <tr>
                                <td>@i</td>
                                <td>@item.Description</td>
                                <td class="text-end">@item.Amount?.ToString("C")</td>
                            </tr>;
                            i++;
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
}

<form asp-action="Delete" method="post" class="mt-3">
    <input type="hidden" asp-for="PrescriptionId" />

    <div class="d-flex justify-content-end gap-2">
        <a asp-action="Index" class="btn btn-outline-secondary px-3">
            <i class="bi bi-arrow-left"></i> Cancel
        </a>
        <button type="submit" class="btn btn-danger px-3">
            <i class="bi bi-trash-fill"></i> Confirm Delete
        </button>
    </div>
</form>
