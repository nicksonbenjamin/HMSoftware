-- Drop tables if they exist
DROP TABLE IF EXISTS Patients_New;

CREATE TABLE Patients_New (
    PatientId  CHAR(36) PRIMARY KEY,
    UHIDType VARCHAR(50) NOT NULL,
    UHIDNo VARCHAR(50),
    RegistrationDate DATE NOT NULL,
    RegistrationTime TIME NOT NULL,
    Sex VARCHAR(3) NOT NULL,
    PatientTitle VARCHAR(10) NOT NULL,
    PatientName VARCHAR(100) NOT NULL,
    DOB DATE,
    Age INT NOT NULL,
    GuardianTitle VARCHAR(10) NOT NULL,
    Guardian VARCHAR(100) NOT NULL,
    Address TEXT NOT NULL,
    Place VARCHAR(100),
    District VARCHAR(100),
    GSTState VARCHAR(100) NOT NULL,
    Country VARCHAR(100) NOT NULL,
    PinCode VARCHAR(10),
    PatientAadhar VARCHAR(12),
    GuardianAadhar VARCHAR(12),
    MobileNo VARCHAR(15) NOT NULL,
    Email VARCHAR(100),
    Photo LONGBLOB,
    Occupation VARCHAR(100),
    MaritalStatus VARCHAR(50),
    BloodGroup VARCHAR(10),
    AllergicTo TEXT,
    ConsultantDoctor VARCHAR(100) NOT NULL,
    RefDoctor VARCHAR(100),
    PaymentTerms VARCHAR(100),
    RegistrationType VARCHAR(50),
    CompOrInsOrCamp VARCHAR(100),
    PatientCondition TEXT,
    ReferenceOrPicmeNo VARCHAR(15),
    IsActive BOOLEAN,
    CreatedBy VARCHAR(50),
    UpdatedBy VARCHAR(50),
    CreatedDate DATETIME,
    UpdatedDate DATETIME
);

-- Drop tables if they exist
DROP TABLE IF EXISTS ProductMaster;

CREATE TABLE ProductMaster (
    ProductCode INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ProductName VARCHAR(100) NOT NULL,
    GenericName TEXT,
    ProductGroup_List VARCHAR(50),
    ProductGroup_Txt VARCHAR(50),
    PurchaseUnit_List VARCHAR(20),
    PurchaseUnit_Txt VARCHAR(20),
    Packing INT,
    StockUnit_List VARCHAR(20),
    StockUnit_Txt VARCHAR(20),
    Rack_List VARCHAR(50),
    Rack_Txt VARCHAR(50),
    Bin_List VARCHAR(50),
    Bin_Txt VARCHAR(50),
    ProductType_List VARCHAR(50),
    ProductType_Txt VARCHAR(50),
    Manufacturer_List VARCHAR(100),
    Manufacturer_Txt VARCHAR(100),
    Remarks TEXT,
    PurchaseRate DECIMAL(10,2),
    PurchaseDiscount DECIMAL(5,2),
    MRP DECIMAL(10,2),
    SaleRate DECIMAL(10,2),
    SaleDiscount DECIMAL(5,2),
    TaxPercent DECIMAL(5,2),
    HSN VARCHAR(20),
    MinStock DECIMAL(10,2),
    MaxStock DECIMAL(10,2),
    MinOrder DECIMAL(10,2),
    IsActive BOOLEAN DEFAULT TRUE,
    CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UpdatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Drop tables if they exist
DROP TABLE IF EXISTS ledgermaster;

CREATE TABLE `ledgermaster` (
  `id` int NOT NULL AUTO_INCREMENT,
  `ledger_type` enum('Company','Supplier','Customer') NOT NULL,
  `ledger_name` varchar(255) NOT NULL,
  `address` text,
  `place` varchar(100) DEFAULT NULL,
  `gstin` varchar(20) DEFAULT NULL,
  `gst_state` varchar(50) DEFAULT NULL,
  `credit_days` int DEFAULT '0',
  `contact_person` varchar(100) DEFAULT NULL,
  `phone_no` varchar(15) DEFAULT NULL,
  `mobile_no` varchar(15) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `drug_license_no` varchar(50) DEFAULT NULL,
  `remarks` text,
  `is_active` tinyint(1) DEFAULT '1',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
);
